import{r as g,A as S,aj as k}from"./index-8kQwHihW.js";function x(m,v={}){const{initialData:p,transform:b=o=>o,showSnackbarOnError:h=!0,onError:i}=v,l=g(p),a=S(null),n=g(!1),w=k();async function A(...o){var c,f,u;n.value=!0,a.value=null;try{const t=await m(...o),e=b(t);return l.value=e,e}catch(t){const e=t;if(a.value=e,console.error("API Error in useApi:",e),i&&i(e),h){let s="發生未知錯誤";if(e&&typeof e=="object"){const r=((f=(c=e==null?void 0:e.response)==null?void 0:c.data)==null?void 0:f.message)||(e==null?void 0:e.message)||((u=e==null?void 0:e.error)==null?void 0:u.message);typeof r=="string"&&r?s=r:e instanceof Error&&(s=e.message)}else typeof e=="string"&&e&&(s=e);w.show(s)}return}finally{n.value=!1}}return{data:l,error:a,loading:n,execute:A}}export{x as u};
