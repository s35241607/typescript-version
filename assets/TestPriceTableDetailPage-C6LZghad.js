import{G as Ne,H as qe,ae as Ee,J as q,A as ee,ap as ge,a6 as Ae,O as $e,b as a,Q as se,aK as ne,d as _e,r as V,al as Le,l as De,c as F,o as f,a as n,f as S,aa as R,w as s,y as x,n as Ge,F as me,B as He,V as te,t as v,i as b,ac as We,T as je,ai as he,_ as Se,q as Ke,k as Qe,a2 as Je,u as o,ab as ie,ak as oe,ag as Xe}from"./index-B6_d_jRM.js";import{p as Ye,e as Ze,m as et}from"./mockService-BTh0xyuy.js";import{u as ye}from"./useApi-IB8PtfyJ.js";import{V as re,b as Z,a as de,c as ue}from"./VCard-BVBKGhN0.js";import{V as be}from"./VChip-B6x1DN2k.js";import{V as xe}from"./VSpacer-DDe77aFb.js";import{V as ae,a as y}from"./VRow-sTWMchgI.js";import{V as O}from"./VTextField-CstEgtqg.js";import{c as tt,a as at,b as lt,u as st,p as nt,d as it,e as ot,f as rt,g as dt,h as ut,i as mt,j as ke,k as Ve,m as ct,l as pt,n as vt}from"./VDataTable-CK2jpSTS.js";import{b as ft,c as gt,d as ht}from"./VSelect-Fwi5LEtB.js";import{u as yt,m as bt}from"./filter-DjP7rrC3.js";import{V as we}from"./VTable-B_rTy4gu.js";import"./VAvatar-9AbkrtnB.js";import"./VImg-DrfBuVRN.js";import"./index-By5FkeFA.js";import"./VSlideGroup-Dr4dyXDO.js";/* empty css              */import"./VCheckboxBtn-CZYskdM_.js";import"./VDivider-KvwWo4zG.js";import"./VList-C_-CCqE5.js";import"./ssrBoot-DOajnLWb.js";import"./VMenu-CqHhrO4A.js";const xt=qe({...pt(),...ct(),...gt(),...bt()},"VDataTableVirtual"),kt=Ne()({name:"VDataTableVirtual",props:xt(),emits:{"update:modelValue":r=>!0,"update:sortBy":r=>!0,"update:options":r=>!0,"update:groupBy":r=>!0,"update:expanded":r=>!0},setup(r,E){let{attrs:g,slots:m}=E;const{groupBy:h}=tt(r),{sortBy:P,multiSort:T,mustSort:k}=at(r),{disableSort:U}=Ee(r),{columns:D,headers:H,filterFunctions:B,sortFunctions:W,sortRawFunctions:j}=lt(r,{groupBy:h,showSelect:q(r,"showSelect"),showExpand:q(r,"showExpand")}),{items:K}=st(r,D),M=q(r,"search"),{filteredItems:d}=yt(r,K,M,{transform:C=>C.columns,customKeyFilter:B}),{toggleSort:Q}=nt({sortBy:P,multiSort:T,mustSort:k}),{sortByWithGroups:A,opened:J,extractRows:X,isGroupOpen:$,toggleGroup:L}=it({groupBy:h,sortBy:P,disableSort:U}),{sortedItems:l}=ot(r,d,A,{transform:C=>({...C.raw,...C.columns}),sortFunctions:W,sortRawFunctions:j}),{flatItems:i}=rt(l,h,J),u=ee(()=>X(i.value)),{isSelected:p,select:I,selectAll:c,toggleSelect:e,someSelected:t,allSelected:w}=dt(r,{allItems:u,currentPage:u}),{isExpanded:N,toggleExpand:_}=ut(r),{containerRef:Pe,markerRef:Ie,paddingTop:Ce,paddingBottom:Te,computedItems:Ue,handleItemResize:Be,handleScroll:Fe,handleScrollend:ze}=ft(r,i),Oe=ee(()=>Ue.value.map(C=>C.raw));mt({sortBy:P,page:ge(1),itemsPerPage:ge(-1),groupBy:h,search:M}),Ae({VDataTableRows:{hideNoData:q(r,"hideNoData"),noDataText:q(r,"noDataText"),loading:q(r,"loading"),loadingText:q(r,"loadingText")}});const Y=ee(()=>({sortBy:P.value,toggleSort:Q,someSelected:t.value,allSelected:w.value,isSelected:p,select:I,selectAll:c,toggleSelect:e,isExpanded:N,toggleExpand:_,isGroupOpen:$,toggleGroup:L,items:u.value.map(C=>C.raw),internalItems:u.value,groupedItems:i.value,columns:D.value,headers:H.value}));$e(()=>{const C=ke.filterProps(r),Re=Ve.filterProps(r),Me=we.filterProps(r);return a(we,se({class:["v-data-table",{"v-data-table--loading":r.loading},r.class],style:r.style},Me,{fixedHeader:r.fixedHeader||r.sticky}),{top:()=>{var z;return(z=m.top)==null?void 0:z.call(m,Y.value)},wrapper:()=>{var z,ce,pe;return a("div",{ref:Pe,onScrollPassive:Fe,onScrollend:ze,class:"v-table__wrapper",style:{height:ne(r.height)}},[a("table",null,[(z=m.colgroup)==null?void 0:z.call(m,Y.value),!r.hideDefaultHeader&&a("thead",{key:"thead"},[a(ke,C,m)]),!r.hideDefaultBody&&a("tbody",null,[a("tr",{ref:Ie,style:{height:ne(Ce.value),border:0}},[a("td",{colspan:D.value.length,style:{height:0,border:0}},null)]),(ce=m["body.prepend"])==null?void 0:ce.call(m,Y.value),a(Ve,se(g,Re,{items:Oe.value}),{...m,item:G=>a(ht,{key:G.internalItem.index,renderless:!0,"onUpdate:height":le=>Be(G.internalItem.index,le)},{default:le=>{var fe;let{itemRef:ve}=le;return((fe=m.item)==null?void 0:fe.call(m,{...G,itemRef:ve}))??a(vt,se(G.props,{ref:ve,key:G.internalItem.index,index:G.internalItem.index}),m)}})}),(pe=m["body.append"])==null?void 0:pe.call(m,Y.value),a("tr",{style:{height:ne(Te.value),border:0}},[a("td",{colspan:D.value.length,style:{height:0,border:0}},null)])])])])},bottom:()=>{var z;return(z=m.bottom)==null?void 0:z.call(m,Y.value)}})})}}),Vt={class:"file-upload-container"},wt={class:"upload-area"},_t={key:0,class:"file-list"},Dt=["onClick"],St={class:"file-details"},Pt={class:"file-name"},It={class:"file-size"},Ct={class:"file-actions"},Tt={class:"progress-container"},Ut=_e({__name:"FileUploader",props:{initialAttachments:{type:Array,default:()=>[]},uploadUrl:{type:String,default:"/api/attachments/upload"},deleteUrl:{type:String,default:"/api/attachments/delete"},relatedId:{type:[String,Number],default:null},relatedType:{type:String,default:null}},emits:["update:attachments","upload-success","upload-error","delete-success","delete-error"],setup(r,{emit:E}){const g=r,m=E,h=V([]),P=V(null),T=V(!1),k=V({}),U=Le({}),D=V({});De(()=>{g.initialAttachments&&g.initialAttachments.length>0&&(h.value=[...g.initialAttachments])});const H=()=>Date.now().toString(36)+Math.random().toString(36).substring(2),B=l=>l.startsWith("image/")?"ri-image-line":l.startsWith("video/")?"ri-video-line":l.startsWith("audio/")?"ri-music-line":l.includes("pdf")?"ri-file-pdf-line":l.includes("word")||l.includes("document")?"ri-file-word-line":l.includes("excel")||l.includes("sheet")?"ri-file-excel-line":l.includes("powerpoint")||l.includes("presentation")?"ri-file-ppt-line":l.includes("zip")||l.includes("compressed")?"ri-file-zip-line":"ri-file-line",W=l=>{if(l===0)return"0 Bytes";const i=1024,u=["Bytes","KB","MB","GB"],p=Math.floor(Math.log(l)/Math.log(i));return`${Number.parseFloat((l/i**p).toFixed(2))} ${u[p]}`},j=async l=>{k.value[l.id]=0,D.value[l.id]="";try{const i=new FormData;l.file&&i.append("file",l.file),g.relatedId&&i.append("relatedId",g.relatedId.toString()),g.relatedType&&i.append("relatedType",g.relatedType);const u=await he.post(g.uploadUrl,i,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:p=>{if(p.total){const I=Math.round(p.loaded*100/p.total);k.value[l.id]=I}}});if(u.data&&u.data.id){const p=h.value.findIndex(I=>I.id===l.id);p!==-1&&(h.value[p]={...h.value[p],id:u.data.id,url:u.data.url||h.value[p].url})}return U[l.id]=!0,setTimeout(()=>{U[l.id]=!1},1500),m("upload-success",u.data),m("update:attachments",h.value),u.data}catch(i){throw console.error("上傳失敗",i),D.value[l.id]="上傳失敗",k.value[l.id]=0,m("upload-error",{fileId:l.id,error:i}),i}},K=()=>{P.value&&P.value.click()},M=l=>{l&&Array.from(l).forEach(i=>{if(!h.value.some(p=>p.name===i.name&&p.size===i.size)){const p={name:i.name,size:i.size,type:i.type,url:URL.createObjectURL(i),file:i,id:H()};h.value.push(p),j(p).catch(()=>{const I=h.value.findIndex(c=>c.id===p.id);I!==-1&&h.value.splice(I,1)})}})},d=l=>{const i=l.target;M(i.files),i&&(i.value="")},Q=l=>{l.preventDefault(),T.value=!0},A=l=>{l.preventDefault(),T.value=!0},J=()=>{T.value=!1},X=l=>{var i;l.preventDefault(),T.value=!1,M(((i=l.dataTransfer)==null?void 0:i.files)||null)},$=l=>{if(l.file){const i=document.createElement("a");i.href=l.url,i.download=l.name,document.body.appendChild(i),i.click(),document.body.removeChild(i)}else window.open(l.url,"_blank")},L=async l=>{const i=h.value.findIndex(p=>p.id===l);if(i===-1)return;const u=h.value[i];try{u.file?u.url.startsWith("blob:")&&URL.revokeObjectURL(u.url):await he.delete(`${g.deleteUrl}/${l}`),h.value.splice(i,1),delete k.value[l],delete U[l],delete D.value[l],m("delete-success",l),m("update:attachments",h.value)}catch(p){console.error("刪除失敗",p),m("delete-error",{fileId:l,error:p})}};return(l,i)=>(f(),F("div",Vt,[n("div",wt,[a(R,{variant:"tonal",color:"primary",size:"small","prepend-icon":"ri-upload-line",onClick:K},{default:s(()=>[...i[0]||(i[0]=[x(" 選擇文件 ",-1)])]),_:1}),n("div",{class:Ge(["dropzone",{"is-dragging":T.value}]),onDragenter:Q,onDragover:A,onDragleave:J,onDrop:X},[...i[1]||(i[1]=[n("span",{class:"text-caption text-medium-emphasis"},"拖放文件至此",-1)])],34)]),n("input",{ref_key:"fileInput",ref:P,type:"file",hidden:"",multiple:"",onChange:d},null,544),h.value.length>0?(f(),F("div",_t,[(f(!0),F(me,null,He(h.value,u=>(f(),F("div",{key:u.id,class:"file-item"},[n("div",{class:"file-info",onClick:p=>$(u)},[a(te,{icon:B(u.type),size:"small",color:"primary"},null,8,["icon"]),n("div",St,[n("div",Pt,v(u.name),1),n("div",It,v(W(u.size)),1)])],8,Dt),n("div",Ct,[n("div",Tt,[k.value[u.id]<100?(f(),b(We,{key:0,"model-value":k.value[u.id],size:16,width:2,color:"primary"},null,8,["model-value"])):S("",!0),a(je,{name:"checkmark-fly"},{default:s(()=>[U[u.id]?(f(),b(te,{key:0,icon:"ri-check-line",color:"success",size:"small",class:"checkmark-icon"})):S("",!0)]),_:2},1024),D.value[u.id]?(f(),b(te,{key:1,icon:"ri-error-warning-line",color:"error",size:"small",title:D.value[u.id]},null,8,["title"])):S("",!0)]),a(R,{icon:"",variant:"text",color:"error",size:"small",onClick:p=>L(u.id)},{default:s(()=>[a(te,{size:"small",icon:"ri-close-line"})]),_:1},8,["onClick"])])]))),128))])):S("",!0)]))}}),Bt=Se(Ut,[["__scopeId","data-v-a02b9ea0"]]),Ft={class:"d-flex gap-2 align-center mb-2 flex-wrap"},zt={class:"text-h5"},Ot={class:"d-flex gap-2"},Rt={class:"text-high-emphasis font-weight-medium"},Mt={class:"text-high-emphasis font-weight-medium"},Nt={class:"text-high-emphasis font-weight-medium"},qt={class:"text-high-emphasis font-weight-medium"},Et={class:"text-high-emphasis font-weight-medium"},At={class:"text-high-emphasis font-weight-medium"},$t={class:"text-high-emphasis font-weight-medium"},Lt={class:"text-high-emphasis font-weight-medium"},Gt={class:"text-high-emphasis font-weight-medium"},Ht={class:"text-high-emphasis font-weight-medium"},Wt={class:"text-high-emphasis font-weight-medium"},jt={class:"text-high-emphasis font-weight-medium"},Kt={class:"text-high-emphasis font-weight-medium"},Qt={class:"text-high-emphasis font-weight-medium"},Jt={class:"attachment-field"},Xt=["colspan"],Yt={key:1,class:"d-block text-right"},Zt={key:1,class:"d-block text-right"},ea={key:1,class:"d-block text-right"},ta=_e({__name:"TestPriceTableDetailPage",setup(r){const E=V({}),g=V({}),m=V([]),h=c=>{m.value=c},P=c=>{console.log("文件上傳成功:",c)},T=c=>{console.error("文件上傳失敗:",c)},k=V(!1),U=[c=>!!c||"Date is required",c=>{const e=new Date(c);return!Number.isNaN(e.getTime())||"Invalid date format"}],D=V([{title:"",key:"data-table-group"},{title:"#",key:"sequence"},{title:"Type",key:"type"},{title:"P/N",key:"eqpOption.partNumber"},{title:"Supplier P/N",key:"eqpOption.supplierPartNumber"},{title:"Description",key:"eqpOption.description"},{title:"Saving Base",key:"savingBase"},{title:"List Price",key:"listPrice"},{title:"Reference Price",key:"referencePrice"}]),H=V([]),B=V([]),W=(c,e)=>{const t=B.value.indexOf(e.item.id);console.log("expand",t),t===-1?B.value.push(e.item.id):B.value.splice(t,1)},j=c=>{E.value.items=E.value.items.filter(e=>e.id!==c.id)},K=Ke(),M=Number(K.params.id),{data:d,loading:Q,error:A,execute:J}=ye(()=>Ye.getPriceTableById(M),{initialData:void 0}),{data:X,loading:$,error:L,execute:l}=ye(Ze.getEqpOptions,{initialData:[]}),i=V(!1),u=V(null),p=ee(()=>(X.value??[]).reduce((c,e)=>(c[e.id]=e,c),{})),I=ee(()=>{var c;return(((c=d.value)==null?void 0:c.items)??[]).map(e=>({...e,eqpOption:p.value[e.eqpOptionId]??{}}))});return Qe(d,async c=>{if(c!=null&&c.machineId){i.value=!0,u.value=null;try{g.value=await et.getMachineById(c.machineId)}catch(e){console.error("Failed to fetch machine data:",e),u.value=e}finally{i.value=!1}}else g.value=void 0},{immediate:!1}),Je(()=>{J(),l()}),De(()=>{Object.values(H.value).forEach(c=>{c.toggleGroup(c.item)})}),(c,e)=>(f(),F(me,null,[o(Q)?(f(),b(ie,{key:0,indeterminate:"",color:"primary"})):S("",!0),o(A)?(f(),b(oe,{key:1,type:"error",class:"mb-4"},{default:s(()=>[x(" Failed to load Price Table details: "+v(o(A)),1)]),_:1})):S("",!0),o(d)?(f(),F(me,{key:2},[a(re,{class:"d-flex justify-space-between align-center flex-wrap gap-y-4 mb-6"},{default:s(()=>[a(Z,null,{default:s(()=>{var t,w,N;return[n("div",Ft,[n("h5",zt,v(((t=o(d))==null?void 0:t.orderNumber)??"Loading..."),1),n("div",Ot,[(w=o(d))!=null&&w.status?(f(),b(be,{key:0,color:"warning",variant:"tonal",size:"small"},{default:s(()=>[x(v(o(d).status),1)]),_:1})):S("",!0),(N=o(d))!=null&&N.currency?(f(),b(be,{key:1,color:"info",variant:"tonal",size:"small"},{default:s(()=>[x(v(o(d).currency),1)]),_:1})):S("",!0)]),a(xe),a(R,{size:"small"},{default:s(()=>[...e[7]||(e[7]=[x(" Submit ",-1)])]),_:1}),a(R,{color:"error",variant:"outlined",size:"small"},{default:s(()=>[...e[8]||(e[8]=[x(" Delete ",-1)])]),_:1})]),a(ae,null,{default:s(()=>[a(y,{cols:"12",sm:"3"},{default:s(()=>{var _;return[e[9]||(e[9]=n("div",null," Created By ",-1)),n("span",Rt,v(((_=o(d))==null?void 0:_.createdBy)??"..."),1)]}),_:1}),a(y,{cols:"12",sm:"3"},{default:s(()=>{var _;return[e[10]||(e[10]=n("div",null," Created At ",-1)),n("span",Mt,v((_=o(d))!=null&&_.createdAt?new Date(o(d).createdAt).toLocaleString("en-US",{weekday:"short",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1}):"..."),1)]}),_:1}),a(y,{cols:"12",sm:"3"},{default:s(()=>{var _;return[e[11]||(e[11]=n("div",null," Last Updated By ",-1)),n("span",Nt,v(((_=o(d))==null?void 0:_.updatedBy)??"..."),1)]}),_:1}),a(y,{cols:"12",sm:"3"},{default:s(()=>{var _;return[e[12]||(e[12]=n("div",null," Last Updated At ",-1)),n("span",qt,v((_=o(d))!=null&&_.updatedAt?new Date(o(d).updatedAt).toLocaleString("en-US",{weekday:"short",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1}):"..."),1)]}),_:1})]),_:1})]}),_:1})]),_:1}),i.value?(f(),b(ie,{key:0,indeterminate:"",color:"secondary",class:"mb-6"})):u.value?(f(),b(oe,{key:1,type:"error",class:"mb-6"},{default:s(()=>[x(" Failed to load Machine details: "+v(u.value),1)]),_:1})):g.value?(f(),b(re,{key:2,class:"mb-6"},{default:s(()=>[a(ue,null,{default:s(()=>[a(de,null,{default:s(()=>[...e[13]||(e[13]=[x(" Machine Information ",-1)])]),_:1})]),_:1}),a(Z,null,{default:s(()=>[a(ae,null,{default:s(()=>[a(y,{cols:"12",lg:"3",md:"3",sm:"4"},{default:s(()=>{var t;return[e[14]||(e[14]=n("div",null,"Maker",-1)),n("span",Et,v((t=g.value)==null?void 0:t.maker),1)]}),_:1}),a(y,{cols:"12",lg:"3",md:"3",sm:"4"},{default:s(()=>{var t;return[e[15]||(e[15]=n("div",null,"Model Name",-1)),n("span",At,v((t=g.value)==null?void 0:t.modelName),1)]}),_:1}),a(y,{cols:"12",lg:"3",md:"3",sm:"4"},{default:s(()=>{var t;return[e[16]||(e[16]=n("div",null,"Process",-1)),n("span",$t,v((t=g.value)==null?void 0:t.process),1)]}),_:1}),a(y,{cols:"12",lg:"3",md:"3",sm:"4"},{default:s(()=>{var t;return[e[17]||(e[17]=n("div",null,"Location",-1)),n("span",Lt,v((t=g.value)==null?void 0:t.location),1)]}),_:1}),a(y,{cols:"12",lg:"3",md:"3",sm:"4"},{default:s(()=>{var t;return[e[18]||(e[18]=n("div",null,"Status",-1)),n("span",Gt,v((t=g.value)==null?void 0:t.status),1)]}),_:1}),a(y,{cols:"12",lg:"3",md:"3",sm:"4"},{default:s(()=>{var t;return[e[19]||(e[19]=n("div",null,"Serial Number",-1)),n("span",Ht,v((t=g.value)==null?void 0:t.serialNumber),1)]}),_:1}),a(y,{cols:"12",lg:"3",md:"3",sm:"4"},{default:s(()=>{var t;return[e[20]||(e[20]=n("div",null,"Installation Date",-1)),n("span",Wt,v((t=g.value)==null?void 0:t.installationDate),1)]}),_:1}),a(y,{cols:"12",lg:"3",md:"3",sm:"4"},{default:s(()=>{var t;return[e[21]||(e[21]=n("div",null,"Last Maintenance",-1)),n("span",jt,v((t=g.value)==null?void 0:t.lastMaintenance),1)]}),_:1}),a(y,{cols:"12",lg:"3",md:"3",sm:"4"},{default:s(()=>{var t;return[e[22]||(e[22]=n("div",null,"Warranty Period",-1)),n("span",Kt,v((t=g.value)==null?void 0:t.warrantyPeriod),1)]}),_:1}),a(y,{cols:"12",lg:"3",md:"3",sm:"4"},{default:s(()=>{var t;return[e[23]||(e[23]=n("div",null,"Production Capacity",-1)),n("span",Qt,v((t=g.value)==null?void 0:t.productionCapacity),1)]}),_:1})]),_:1})]),_:1})]),_:1})):S("",!0),o(d)?(f(),b(re,{key:3,class:"mb-6"},{default:s(()=>[a(ue,null,{default:s(()=>[a(de,{class:"d-flex"},{default:s(()=>[e[25]||(e[25]=n("span",null,"Price Table Information",-1)),a(xe),a(R,{size:"small"},{default:s(()=>[...e[24]||(e[24]=[x(" Save ",-1)])]),_:1})]),_:1})]),_:1}),a(Z,null,{default:s(()=>[a(ae,null,{default:s(()=>[a(y,{cols:"12",md:"3",sm:"6"},{default:s(()=>[e[26]||(e[26]=n("label",null,"Currency",-1)),a(O,{modelValue:o(d).currency,"onUpdate:modelValue":e[0]||(e[0]=t=>o(d).currency=t),disabled:!o(d)},null,8,["modelValue","disabled"])]),_:1}),a(y,{cols:"12",md:"3",sm:"6"},{default:s(()=>[e[27]||(e[27]=n("label",null,"Owner",-1)),a(O,{modelValue:o(d).ownerId,"onUpdate:modelValue":e[1]||(e[1]=t=>o(d).ownerId=t),modelModifiers:{number:!0},disabled:!o(d),type:"number"},null,8,["modelValue","disabled"])]),_:1}),a(y,{cols:`
              12`,md:"3",sm:"6"},{default:s(()=>[e[28]||(e[28]=n("label",null,"Contract Start Date",-1)),a(O,{modelValue:o(d).contractStartDate,"onUpdate:modelValue":e[2]||(e[2]=t=>o(d).contractStartDate=t),rules:U,disabled:!o(d),type:"date"},null,8,["modelValue","disabled"])]),_:1}),a(y,{cols:"12",md:"3",sm:"6"},{default:s(()=>[e[29]||(e[29]=n("label",null,"Contract End Date",-1)),a(O,{modelValue:o(d).contractEndDate,"onUpdate:modelValue":e[3]||(e[3]=t=>o(d).contractEndDate=t),rules:U,disabled:!o(d),type:"date"},null,8,["modelValue","disabled"])]),_:1})]),_:1}),a(ae,null,{default:s(()=>[a(y,{cols:"12",md:"6"},{default:s(()=>[e[30]||(e[30]=n("label",null,"Remark",-1)),a(O,{modelValue:o(d).remark,"onUpdate:modelValue":e[4]||(e[4]=t=>o(d).remark=t),disabled:!o(d)},null,8,["modelValue","disabled"])]),_:1}),a(y,{cols:"12",md:"6"},{default:s(()=>[e[31]||(e[31]=n("label",null,"Attachment",-1)),n("div",Jt,[a(Bt,{"initial-attachments":m.value,"related-id":o(d).id,disabled:!o(d),"related-type":"price-table","upload-url":"/api/attachments/upload","delete-url":"/api/attachments/delete","onUpdate:attachments":h,onUploadSuccess:P,onUploadError:T},null,8,["initial-attachments","related-id","disabled"])])]),_:1})]),_:1})]),_:1}),a(ue,null,{default:s(()=>[a(de,null,{default:s(()=>[...e[32]||(e[32]=[x("Price Table Items",-1)])]),_:1})]),_:1}),a(Z,{class:"d-flex gap-2"},{default:s(()=>[a(R,{disabled:o($)},{default:s(()=>[...e[33]||(e[33]=[x(" Choose P/N ",-1)])]),_:1},8,["disabled"]),a(R,{onClick:e[5]||(e[5]=t=>k.value=!k.value)},{default:s(()=>[x(v(k.value?"Done":"Edit"),1)]),_:1})]),_:1}),a(Z,null,{default:s(()=>[o($)?(f(),b(ie,{key:0,indeterminate:"",color:"info"})):o(L)?(f(),b(oe,{key:1,type:"error",class:"mb-4"},{default:s(()=>[x(" Failed to load EQP Options: "+v(o(L)),1)]),_:1})):(f(),b(kt,{key:2,expanded:B.value,"onUpdate:expanded":e[6]||(e[6]=t=>B.value=t),headers:D.value,items:I.value,"show-expand":"","group-by":[{key:"eqpOption.category",order:"asc"}],height:"60vh","fixed-header":"","item-value":"id","onClick:row":W},{"item.data-table-group":s(({item:t})=>[a(R,{size:"x-small",variant:"text",color:"error",icon:"ri-delete-bin-line",onClick:Xe(w=>j(t),["stop"])},null,8,["onClick"])]),"item.sequence":s(({index:t})=>[x(v(t+1),1)]),"item.eqpOption.description":s(({item:t})=>[x(v(t.eqpOption.description),1)]),"expanded-row":s(({columns:t,item:w})=>{var N;return[n("tr",null,[n("td",{colspan:t.length},[e[34]||(e[34]=n("strong",null,"Supplement:",-1)),x(" "+v(((N=w.eqpOption)==null?void 0:N.supplement)||"N/A"),1)],8,Xt)])]}),"item.savingBase":s(({item:t})=>[k.value?(f(),b(O,{key:0,modelValue:t.savingBase,"onUpdate:modelValue":w=>t.savingBase=w,modelModifiers:{number:!0},type:"number",density:"compact","hide-details":"",variant:"underlined",class:"editable-input text-right"},null,8,["modelValue","onUpdate:modelValue"])):(f(),F("span",Yt,v(t.savingBase),1))]),"item.listPrice":s(({item:t})=>[k.value?(f(),b(O,{key:0,modelValue:t.listPrice,"onUpdate:modelValue":w=>t.listPrice=w,modelModifiers:{number:!0},type:"number",density:"compact","hide-details":"",variant:"underlined",class:"editable-input text-right"},null,8,["modelValue","onUpdate:modelValue"])):(f(),F("span",Zt,v(t.listPrice),1))]),"item.referencePrice":s(({item:t})=>[k.value?(f(),b(O,{key:0,modelValue:t.referencePrice,"onUpdate:modelValue":w=>t.referencePrice=w,modelModifiers:{number:!0},type:"number",density:"compact","hide-details":"",variant:"underlined",class:"editable-input text-right"},null,8,["modelValue","onUpdate:modelValue"])):(f(),F("span",ea,v(t.referencePrice),1))]),_:1},8,["expanded","headers","items"]))]),_:1})]),_:1})):S("",!0)],64)):S("",!0)],64))}}),_a=Se(ta,[["__scopeId","data-v-1cbb93d9"]]);export{_a as default};
