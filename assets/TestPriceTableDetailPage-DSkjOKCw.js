import{G as Ne,H as qe,ae as Ee,x as q,B as ee,A as ge,a5 as Ae,N as $e,b as a,P as se,aJ as ne,d as we,r as k,an as Le,l as De,c as F,o as f,a as n,f as S,aa as R,w as s,C as b,n as Ge,F as me,a9 as He,V as te,t as v,i as _,ac as We,T as je,ak as he,_ as Se,q as Ke,k as Je,a1 as Qe,u as o,ab as ie,am as oe,ai as Xe}from"./index-rr-Tr-fd.js";import{p as Ye,e as Ze,m as et}from"./mockService-Bm42PPW6.js";import{u as ye}from"./useApi-Bb43qmFJ.js";import{V as re,b as Z,a as de,c as ue}from"./VCard-DRH1mBfF.js";import{c as tt,d as at,e as lt,a as _e}from"./VSelect-DbvEkkYk.js";import{V as be}from"./VSpacer-C-A7_gFL.js";import{V as ae,a as y}from"./VRow-B7kBUxxP.js";import{V as O}from"./VTextField-CQp_SlC6.js";import{c as st,a as nt,b as it,d as ot,u as rt,p as dt,e as ut,f as mt,g as ct,h as pt,i as vt,j as ft,k as xe,l as ke,m as gt,n as ht,o as yt,q as _t}from"./VDataTable-DCEmrpV3.js";import{V as Ve}from"./VTable-Dr-GUvn_.js";import"./VAvatar-CC0r5EJk.js";import"./VImg-9JkW0xQc.js";import"./VMenu-DGPt15sV.js";import"./index-lobl2cwq.js";import"./ssrBoot-aAklO4dQ.js";import"./VDivider-BDcz1P_O.js";import"./VSlideGroup-Ci5Tfwaf.js";/* empty css              */const bt=qe({...yt(),...ht(),...at(),...gt()},"VDataTableVirtual"),xt=Ne()({name:"VDataTableVirtual",props:bt(),emits:{"update:modelValue":r=>!0,"update:sortBy":r=>!0,"update:options":r=>!0,"update:groupBy":r=>!0,"update:expanded":r=>!0},setup(r,E){let{attrs:g,slots:m}=E;const{groupBy:h}=st(r),{sortBy:P,multiSort:T,mustSort:x}=nt(r),{disableSort:U}=Ee(r),{columns:D,headers:H,filterFunctions:B,sortFunctions:W,sortRawFunctions:j}=it(r,{groupBy:h,showSelect:q(r,"showSelect"),showExpand:q(r,"showExpand")}),{items:K}=ot(r,D),M=q(r,"search"),{filteredItems:d}=rt(r,K,M,{transform:C=>C.columns,customKeyFilter:B}),{toggleSort:J}=dt({sortBy:P,multiSort:T,mustSort:x}),{sortByWithGroups:A,opened:Q,extractRows:X,isGroupOpen:$,toggleGroup:L}=ut({groupBy:h,sortBy:P,disableSort:U}),{sortedItems:l}=mt(r,d,A,{transform:C=>({...C.raw,...C.columns}),sortFunctions:W,sortRawFunctions:j}),{flatItems:i}=ct(l,h,Q),u=ee(()=>X(i.value)),{isSelected:p,select:I,selectAll:c,toggleSelect:e,someSelected:t,allSelected:V}=pt(r,{allItems:u,currentPage:u}),{isExpanded:N,toggleExpand:w}=vt(r),{containerRef:Pe,markerRef:Ie,paddingTop:Ce,paddingBottom:Te,computedItems:Ue,handleItemResize:Be,handleScroll:Fe,handleScrollend:ze}=tt(r,i),Oe=ee(()=>Ue.value.map(C=>C.raw));ft({sortBy:P,page:ge(1),itemsPerPage:ge(-1),groupBy:h,search:M}),Ae({VDataTableRows:{hideNoData:q(r,"hideNoData"),noDataText:q(r,"noDataText"),loading:q(r,"loading"),loadingText:q(r,"loadingText")}});const Y=ee(()=>({sortBy:P.value,toggleSort:J,someSelected:t.value,allSelected:V.value,isSelected:p,select:I,selectAll:c,toggleSelect:e,isExpanded:N,toggleExpand:w,isGroupOpen:$,toggleGroup:L,items:u.value.map(C=>C.raw),internalItems:u.value,groupedItems:i.value,columns:D.value,headers:H.value}));$e(()=>{const C=xe.filterProps(r),Re=ke.filterProps(r),Me=Ve.filterProps(r);return a(Ve,se({class:["v-data-table",{"v-data-table--loading":r.loading},r.class],style:r.style},Me,{fixedHeader:r.fixedHeader||r.sticky}),{top:()=>{var z;return(z=m.top)==null?void 0:z.call(m,Y.value)},wrapper:()=>{var z,ce,pe;return a("div",{ref:Pe,onScrollPassive:Fe,onScrollend:ze,class:"v-table__wrapper",style:{height:ne(r.height)}},[a("table",null,[(z=m.colgroup)==null?void 0:z.call(m,Y.value),!r.hideDefaultHeader&&a("thead",{key:"thead"},[a(xe,C,m)]),!r.hideDefaultBody&&a("tbody",null,[a("tr",{ref:Ie,style:{height:ne(Ce.value),border:0}},[a("td",{colspan:D.value.length,style:{height:0,border:0}},null)]),(ce=m["body.prepend"])==null?void 0:ce.call(m,Y.value),a(ke,se(g,Re,{items:Oe.value}),{...m,item:G=>a(lt,{key:G.internalItem.index,renderless:!0,"onUpdate:height":le=>Be(G.internalItem.index,le)},{default:le=>{var fe;let{itemRef:ve}=le;return((fe=m.item)==null?void 0:fe.call(m,{...G,itemRef:ve}))??a(_t,se(G.props,{ref:ve,key:G.internalItem.index,index:G.internalItem.index}),m)}})}),(pe=m["body.append"])==null?void 0:pe.call(m,Y.value),a("tr",{style:{height:ne(Te.value),border:0}},[a("td",{colspan:D.value.length,style:{height:0,border:0}},null)])])])])},bottom:()=>{var z;return(z=m.bottom)==null?void 0:z.call(m,Y.value)}})})}}),kt={class:"file-upload-container"},Vt={class:"upload-area"},wt={key:0,class:"file-list"},Dt=["onClick"],St={class:"file-details"},Pt={class:"file-name"},It={class:"file-size"},Ct={class:"file-actions"},Tt={class:"progress-container"},Ut=we({__name:"FileUploader",props:{initialAttachments:{type:Array,default:()=>[]},uploadUrl:{type:String,default:"/api/attachments/upload"},deleteUrl:{type:String,default:"/api/attachments/delete"},relatedId:{type:[String,Number],default:null},relatedType:{type:String,default:null}},emits:["update:attachments","upload-success","upload-error","delete-success","delete-error"],setup(r,{emit:E}){const g=r,m=E,h=k([]),P=k(null),T=k(!1),x=k({}),U=Le({}),D=k({});De(()=>{g.initialAttachments&&g.initialAttachments.length>0&&(h.value=[...g.initialAttachments])});const H=()=>Date.now().toString(36)+Math.random().toString(36).substring(2),B=l=>l.startsWith("image/")?"ri-image-line":l.startsWith("video/")?"ri-video-line":l.startsWith("audio/")?"ri-music-line":l.includes("pdf")?"ri-file-pdf-line":l.includes("word")||l.includes("document")?"ri-file-word-line":l.includes("excel")||l.includes("sheet")?"ri-file-excel-line":l.includes("powerpoint")||l.includes("presentation")?"ri-file-ppt-line":l.includes("zip")||l.includes("compressed")?"ri-file-zip-line":"ri-file-line",W=l=>{if(l===0)return"0 Bytes";const i=1024,u=["Bytes","KB","MB","GB"],p=Math.floor(Math.log(l)/Math.log(i));return`${Number.parseFloat((l/i**p).toFixed(2))} ${u[p]}`},j=async l=>{x.value[l.id]=0,D.value[l.id]="";try{const i=new FormData;l.file&&i.append("file",l.file),g.relatedId&&i.append("relatedId",g.relatedId.toString()),g.relatedType&&i.append("relatedType",g.relatedType);const u=await he.post(g.uploadUrl,i,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:p=>{if(p.total){const I=Math.round(p.loaded*100/p.total);x.value[l.id]=I}}});if(u.data&&u.data.id){const p=h.value.findIndex(I=>I.id===l.id);p!==-1&&(h.value[p]={...h.value[p],id:u.data.id,url:u.data.url||h.value[p].url})}return U[l.id]=!0,setTimeout(()=>{U[l.id]=!1},1500),m("upload-success",u.data),m("update:attachments",h.value),u.data}catch(i){throw console.error("上傳失敗",i),D.value[l.id]="上傳失敗",x.value[l.id]=0,m("upload-error",{fileId:l.id,error:i}),i}},K=()=>{P.value&&P.value.click()},M=l=>{l&&Array.from(l).forEach(i=>{if(!h.value.some(p=>p.name===i.name&&p.size===i.size)){const p={name:i.name,size:i.size,type:i.type,url:URL.createObjectURL(i),file:i,id:H()};h.value.push(p),j(p).catch(()=>{const I=h.value.findIndex(c=>c.id===p.id);I!==-1&&h.value.splice(I,1)})}})},d=l=>{const i=l.target;M(i.files),i&&(i.value="")},J=l=>{l.preventDefault(),T.value=!0},A=l=>{l.preventDefault(),T.value=!0},Q=()=>{T.value=!1},X=l=>{var i;l.preventDefault(),T.value=!1,M(((i=l.dataTransfer)==null?void 0:i.files)||null)},$=l=>{if(l.file){const i=document.createElement("a");i.href=l.url,i.download=l.name,document.body.appendChild(i),i.click(),document.body.removeChild(i)}else window.open(l.url,"_blank")},L=async l=>{const i=h.value.findIndex(p=>p.id===l);if(i===-1)return;const u=h.value[i];try{u.file?u.url.startsWith("blob:")&&URL.revokeObjectURL(u.url):await he.delete(`${g.deleteUrl}/${l}`),h.value.splice(i,1),delete x.value[l],delete U[l],delete D.value[l],m("delete-success",l),m("update:attachments",h.value)}catch(p){console.error("刪除失敗",p),m("delete-error",{fileId:l,error:p})}};return(l,i)=>(f(),F("div",kt,[n("div",Vt,[a(R,{variant:"tonal",color:"primary",size:"small","prepend-icon":"ri-upload-line",onClick:K},{default:s(()=>i[0]||(i[0]=[b(" 選擇文件 ")])),_:1,__:[0]}),n("div",{class:Ge(["dropzone",{"is-dragging":T.value}]),onDragenter:J,onDragover:A,onDragleave:Q,onDrop:X},i[1]||(i[1]=[n("span",{class:"text-caption text-medium-emphasis"},"拖放文件至此",-1)]),34)]),n("input",{ref_key:"fileInput",ref:P,type:"file",hidden:"",multiple:"",onChange:d},null,544),h.value.length>0?(f(),F("div",wt,[(f(!0),F(me,null,He(h.value,u=>(f(),F("div",{key:u.id,class:"file-item"},[n("div",{class:"file-info",onClick:p=>$(u)},[a(te,{icon:B(u.type),size:"small",color:"primary"},null,8,["icon"]),n("div",St,[n("div",Pt,v(u.name),1),n("div",It,v(W(u.size)),1)])],8,Dt),n("div",Ct,[n("div",Tt,[x.value[u.id]<100?(f(),_(We,{key:0,"model-value":x.value[u.id],size:16,width:2,color:"primary"},null,8,["model-value"])):S("",!0),a(je,{name:"checkmark-fly"},{default:s(()=>[U[u.id]?(f(),_(te,{key:0,icon:"ri-check-line",color:"success",size:"small",class:"checkmark-icon"})):S("",!0)]),_:2},1024),D.value[u.id]?(f(),_(te,{key:1,icon:"ri-error-warning-line",color:"error",size:"small",title:D.value[u.id]},null,8,["title"])):S("",!0)]),a(R,{icon:"",variant:"text",color:"error",size:"small",onClick:p=>L(u.id)},{default:s(()=>[a(te,{size:"small",icon:"ri-close-line"})]),_:2},1032,["onClick"])])]))),128))])):S("",!0)]))}}),Bt=Se(Ut,[["__scopeId","data-v-a02b9ea0"]]),Ft={class:"d-flex gap-2 align-center mb-2 flex-wrap"},zt={class:"text-h5"},Ot={class:"d-flex gap-2"},Rt={class:"text-high-emphasis font-weight-medium"},Mt={class:"text-high-emphasis font-weight-medium"},Nt={class:"text-high-emphasis font-weight-medium"},qt={class:"text-high-emphasis font-weight-medium"},Et={class:"text-high-emphasis font-weight-medium"},At={class:"text-high-emphasis font-weight-medium"},$t={class:"text-high-emphasis font-weight-medium"},Lt={class:"text-high-emphasis font-weight-medium"},Gt={class:"text-high-emphasis font-weight-medium"},Ht={class:"text-high-emphasis font-weight-medium"},Wt={class:"text-high-emphasis font-weight-medium"},jt={class:"text-high-emphasis font-weight-medium"},Kt={class:"text-high-emphasis font-weight-medium"},Jt={class:"text-high-emphasis font-weight-medium"},Qt={class:"attachment-field"},Xt=["colspan"],Yt={key:1,class:"d-block text-right"},Zt={key:1,class:"d-block text-right"},ea={key:1,class:"d-block text-right"},ta=we({__name:"TestPriceTableDetailPage",setup(r){const E=k({}),g=k({}),m=k([]),h=c=>{m.value=c},P=c=>{console.log("文件上傳成功:",c)},T=c=>{console.error("文件上傳失敗:",c)},x=k(!1),U=[c=>!!c||"Date is required",c=>{const e=new Date(c);return!Number.isNaN(e.getTime())||"Invalid date format"}],D=k([{title:"",key:"data-table-group"},{title:"#",key:"sequence"},{title:"Type",key:"type"},{title:"P/N",key:"eqpOption.partNumber"},{title:"Supplier P/N",key:"eqpOption.supplierPartNumber"},{title:"Description",key:"eqpOption.description"},{title:"Saving Base",key:"savingBase"},{title:"List Price",key:"listPrice"},{title:"Reference Price",key:"referencePrice"}]),H=k([]),B=k([]),W=(c,e)=>{const t=B.value.indexOf(e.item.id);console.log("expand",t),t===-1?B.value.push(e.item.id):B.value.splice(t,1)},j=c=>{E.value.items=E.value.items.filter(e=>e.id!==c.id)},K=Ke(),M=Number(K.params.id),{data:d,loading:J,error:A,execute:Q}=ye(()=>Ye.getPriceTableById(M),{initialData:void 0}),{data:X,loading:$,error:L,execute:l}=ye(Ze.getEqpOptions,{initialData:[]}),i=k(!1),u=k(null),p=ee(()=>(X.value??[]).reduce((c,e)=>(c[e.id]=e,c),{})),I=ee(()=>{var c;return(((c=d.value)==null?void 0:c.items)??[]).map(e=>({...e,eqpOption:p.value[e.eqpOptionId]??{}}))});return Je(d,async c=>{if(c!=null&&c.machineId){i.value=!0,u.value=null;try{g.value=await et.getMachineById(c.machineId)}catch(e){console.error("Failed to fetch machine data:",e),u.value=e}finally{i.value=!1}}else g.value=void 0},{immediate:!1}),Qe(()=>{Q(),l()}),De(()=>{Object.values(H.value).forEach(c=>{c.toggleGroup(c.item)})}),(c,e)=>(f(),F(me,null,[o(J)?(f(),_(ie,{key:0,indeterminate:"",color:"primary"})):S("",!0),o(A)?(f(),_(oe,{key:1,type:"error",class:"mb-4"},{default:s(()=>[b(" Failed to load Price Table details: "+v(o(A)),1)]),_:1})):S("",!0),o(d)?(f(),F(me,{key:2},[a(re,{class:"d-flex justify-space-between align-center flex-wrap gap-y-4 mb-6"},{default:s(()=>[a(Z,null,{default:s(()=>{var t,V,N;return[n("div",Ft,[n("h5",zt,v(((t=o(d))==null?void 0:t.orderNumber)??"Loading..."),1),n("div",Ot,[(V=o(d))!=null&&V.status?(f(),_(_e,{key:0,color:"warning",variant:"tonal",size:"small"},{default:s(()=>[b(v(o(d).status),1)]),_:1})):S("",!0),(N=o(d))!=null&&N.currency?(f(),_(_e,{key:1,color:"info",variant:"tonal",size:"small"},{default:s(()=>[b(v(o(d).currency),1)]),_:1})):S("",!0)]),a(be),a(R,{size:"small"},{default:s(()=>e[7]||(e[7]=[b(" Submit ")])),_:1,__:[7]}),a(R,{color:"error",variant:"outlined",size:"small"},{default:s(()=>e[8]||(e[8]=[b(" Delete ")])),_:1,__:[8]})]),a(ae,null,{default:s(()=>[a(y,{cols:"12",sm:"3"},{default:s(()=>{var w;return[e[9]||(e[9]=n("div",null," Created By ",-1)),n("span",Rt,v(((w=o(d))==null?void 0:w.createdBy)??"..."),1)]}),_:1,__:[9]}),a(y,{cols:"12",sm:"3"},{default:s(()=>{var w;return[e[10]||(e[10]=n("div",null," Created At ",-1)),n("span",Mt,v((w=o(d))!=null&&w.createdAt?new Date(o(d).createdAt).toLocaleString("en-US",{weekday:"short",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1}):"..."),1)]}),_:1,__:[10]}),a(y,{cols:"12",sm:"3"},{default:s(()=>{var w;return[e[11]||(e[11]=n("div",null," Last Updated By ",-1)),n("span",Nt,v(((w=o(d))==null?void 0:w.updatedBy)??"..."),1)]}),_:1,__:[11]}),a(y,{cols:"12",sm:"3"},{default:s(()=>{var w;return[e[12]||(e[12]=n("div",null," Last Updated At ",-1)),n("span",qt,v((w=o(d))!=null&&w.updatedAt?new Date(o(d).updatedAt).toLocaleString("en-US",{weekday:"short",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1}):"..."),1)]}),_:1,__:[12]})]),_:1})]}),_:1})]),_:1}),i.value?(f(),_(ie,{key:0,indeterminate:"",color:"secondary",class:"mb-6"})):u.value?(f(),_(oe,{key:1,type:"error",class:"mb-6"},{default:s(()=>[b(" Failed to load Machine details: "+v(u.value),1)]),_:1})):g.value?(f(),_(re,{key:2,class:"mb-6"},{default:s(()=>[a(ue,null,{default:s(()=>[a(de,null,{default:s(()=>e[13]||(e[13]=[b(" Machine Information ")])),_:1,__:[13]})]),_:1}),a(Z,null,{default:s(()=>[a(ae,null,{default:s(()=>[a(y,{cols:"12",lg:"3",md:"3",sm:"4"},{default:s(()=>{var t;return[e[14]||(e[14]=n("div",null,"Maker",-1)),n("span",Et,v((t=g.value)==null?void 0:t.maker),1)]}),_:1,__:[14]}),a(y,{cols:"12",lg:"3",md:"3",sm:"4"},{default:s(()=>{var t;return[e[15]||(e[15]=n("div",null,"Model Name",-1)),n("span",At,v((t=g.value)==null?void 0:t.modelName),1)]}),_:1,__:[15]}),a(y,{cols:"12",lg:"3",md:"3",sm:"4"},{default:s(()=>{var t;return[e[16]||(e[16]=n("div",null,"Process",-1)),n("span",$t,v((t=g.value)==null?void 0:t.process),1)]}),_:1,__:[16]}),a(y,{cols:"12",lg:"3",md:"3",sm:"4"},{default:s(()=>{var t;return[e[17]||(e[17]=n("div",null,"Location",-1)),n("span",Lt,v((t=g.value)==null?void 0:t.location),1)]}),_:1,__:[17]}),a(y,{cols:"12",lg:"3",md:"3",sm:"4"},{default:s(()=>{var t;return[e[18]||(e[18]=n("div",null,"Status",-1)),n("span",Gt,v((t=g.value)==null?void 0:t.status),1)]}),_:1,__:[18]}),a(y,{cols:"12",lg:"3",md:"3",sm:"4"},{default:s(()=>{var t;return[e[19]||(e[19]=n("div",null,"Serial Number",-1)),n("span",Ht,v((t=g.value)==null?void 0:t.serialNumber),1)]}),_:1,__:[19]}),a(y,{cols:"12",lg:"3",md:"3",sm:"4"},{default:s(()=>{var t;return[e[20]||(e[20]=n("div",null,"Installation Date",-1)),n("span",Wt,v((t=g.value)==null?void 0:t.installationDate),1)]}),_:1,__:[20]}),a(y,{cols:"12",lg:"3",md:"3",sm:"4"},{default:s(()=>{var t;return[e[21]||(e[21]=n("div",null,"Last Maintenance",-1)),n("span",jt,v((t=g.value)==null?void 0:t.lastMaintenance),1)]}),_:1,__:[21]}),a(y,{cols:"12",lg:"3",md:"3",sm:"4"},{default:s(()=>{var t;return[e[22]||(e[22]=n("div",null,"Warranty Period",-1)),n("span",Kt,v((t=g.value)==null?void 0:t.warrantyPeriod),1)]}),_:1,__:[22]}),a(y,{cols:"12",lg:"3",md:"3",sm:"4"},{default:s(()=>{var t;return[e[23]||(e[23]=n("div",null,"Production Capacity",-1)),n("span",Jt,v((t=g.value)==null?void 0:t.productionCapacity),1)]}),_:1,__:[23]})]),_:1})]),_:1})]),_:1})):S("",!0),o(d)?(f(),_(re,{key:3,class:"mb-6"},{default:s(()=>[a(ue,null,{default:s(()=>[a(de,{class:"d-flex"},{default:s(()=>[e[25]||(e[25]=n("span",null,"Price Table Information",-1)),a(be),a(R,{size:"small"},{default:s(()=>e[24]||(e[24]=[b(" Save ")])),_:1,__:[24]})]),_:1,__:[25]})]),_:1}),a(Z,null,{default:s(()=>[a(ae,null,{default:s(()=>[a(y,{cols:"12",md:"3",sm:"6"},{default:s(()=>[e[26]||(e[26]=n("label",null,"Currency",-1)),a(O,{modelValue:o(d).currency,"onUpdate:modelValue":e[0]||(e[0]=t=>o(d).currency=t),disabled:!o(d)},null,8,["modelValue","disabled"])]),_:1,__:[26]}),a(y,{cols:"12",md:"3",sm:"6"},{default:s(()=>[e[27]||(e[27]=n("label",null,"Owner",-1)),a(O,{modelValue:o(d).ownerId,"onUpdate:modelValue":e[1]||(e[1]=t=>o(d).ownerId=t),modelModifiers:{number:!0},disabled:!o(d),type:"number"},null,8,["modelValue","disabled"])]),_:1,__:[27]}),a(y,{cols:`
              12`,md:"3",sm:"6"},{default:s(()=>[e[28]||(e[28]=n("label",null,"Contract Start Date",-1)),a(O,{modelValue:o(d).contractStartDate,"onUpdate:modelValue":e[2]||(e[2]=t=>o(d).contractStartDate=t),rules:U,disabled:!o(d),type:"date"},null,8,["modelValue","disabled"])]),_:1,__:[28]}),a(y,{cols:"12",md:"3",sm:"6"},{default:s(()=>[e[29]||(e[29]=n("label",null,"Contract End Date",-1)),a(O,{modelValue:o(d).contractEndDate,"onUpdate:modelValue":e[3]||(e[3]=t=>o(d).contractEndDate=t),rules:U,disabled:!o(d),type:"date"},null,8,["modelValue","disabled"])]),_:1,__:[29]})]),_:1}),a(ae,null,{default:s(()=>[a(y,{cols:"12",md:"6"},{default:s(()=>[e[30]||(e[30]=n("label",null,"Remark",-1)),a(O,{modelValue:o(d).remark,"onUpdate:modelValue":e[4]||(e[4]=t=>o(d).remark=t),disabled:!o(d)},null,8,["modelValue","disabled"])]),_:1,__:[30]}),a(y,{cols:"12",md:"6"},{default:s(()=>[e[31]||(e[31]=n("label",null,"Attachment",-1)),n("div",Qt,[a(Bt,{"initial-attachments":m.value,"related-id":o(d).id,disabled:!o(d),"related-type":"price-table","upload-url":"/api/attachments/upload","delete-url":"/api/attachments/delete","onUpdate:attachments":h,onUploadSuccess:P,onUploadError:T},null,8,["initial-attachments","related-id","disabled"])])]),_:1,__:[31]})]),_:1})]),_:1}),a(ue,null,{default:s(()=>[a(de,null,{default:s(()=>e[32]||(e[32]=[b("Price Table Items")])),_:1,__:[32]})]),_:1}),a(Z,{class:"d-flex gap-2"},{default:s(()=>[a(R,{disabled:o($)},{default:s(()=>e[33]||(e[33]=[b(" Choose P/N ")])),_:1,__:[33]},8,["disabled"]),a(R,{onClick:e[5]||(e[5]=t=>x.value=!x.value)},{default:s(()=>[b(v(x.value?"Done":"Edit"),1)]),_:1})]),_:1}),a(Z,null,{default:s(()=>[o($)?(f(),_(ie,{key:0,indeterminate:"",color:"info"})):o(L)?(f(),_(oe,{key:1,type:"error",class:"mb-4"},{default:s(()=>[b(" Failed to load EQP Options: "+v(o(L)),1)]),_:1})):(f(),_(xt,{key:2,expanded:B.value,"onUpdate:expanded":e[6]||(e[6]=t=>B.value=t),headers:D.value,items:I.value,"show-expand":"","group-by":[{key:"eqpOption.category",order:"asc"}],height:"60vh","fixed-header":"","item-value":"id","onClick:row":W},{"item.data-table-group":s(({item:t})=>[a(R,{size:"x-small",variant:"text",color:"error",icon:"ri-delete-bin-line",onClick:Xe(V=>j(t),["stop"])},null,8,["onClick"])]),"item.sequence":s(({index:t})=>[b(v(t+1),1)]),"item.eqpOption.description":s(({item:t})=>[b(v(t.eqpOption.description),1)]),"expanded-row":s(({columns:t,item:V})=>{var N;return[n("tr",null,[n("td",{colspan:t.length},[e[34]||(e[34]=n("strong",null,"Supplement:",-1)),b(" "+v(((N=V.eqpOption)==null?void 0:N.supplement)||"N/A"),1)],8,Xt)])]}),"item.savingBase":s(({item:t})=>[x.value?(f(),_(O,{key:0,modelValue:t.savingBase,"onUpdate:modelValue":V=>t.savingBase=V,modelModifiers:{number:!0},type:"number",density:"compact","hide-details":"",variant:"underlined",class:"editable-input text-right"},null,8,["modelValue","onUpdate:modelValue"])):(f(),F("span",Yt,v(t.savingBase),1))]),"item.listPrice":s(({item:t})=>[x.value?(f(),_(O,{key:0,modelValue:t.listPrice,"onUpdate:modelValue":V=>t.listPrice=V,modelModifiers:{number:!0},type:"number",density:"compact","hide-details":"",variant:"underlined",class:"editable-input text-right"},null,8,["modelValue","onUpdate:modelValue"])):(f(),F("span",Zt,v(t.listPrice),1))]),"item.referencePrice":s(({item:t})=>[x.value?(f(),_(O,{key:0,modelValue:t.referencePrice,"onUpdate:modelValue":V=>t.referencePrice=V,modelModifiers:{number:!0},type:"number",density:"compact","hide-details":"",variant:"underlined",class:"editable-input text-right"},null,8,["modelValue","onUpdate:modelValue"])):(f(),F("span",ea,v(t.referencePrice),1))]),_:1},8,["expanded","headers","items"]))]),_:1})]),_:1})):S("",!0)],64)):S("",!0)],64))}}),ba=Se(ta,[["__scopeId","data-v-1cbb93d9"]]);export{ba as default};
