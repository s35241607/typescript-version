import{r as g,ar as k,ah as A}from"./index-ChDAYuUB.js";function D(m,v={}){const{initialData:h,transform:p=o=>o,showSnackbarOnError:b=!0,onError:i}=v,l=g(h),a=k(null),n=g(!1),w=A();async function S(...o){var c,f,u;n.value=!0,a.value=null;try{const r=await m(...o),e=p(r);return l.value=e,e}catch(r){const e=r;if(a.value=e,console.error("API Error in useApi:",e),i&&i(e),b){let s="發生未知錯誤";if(e&&typeof e=="object"){const t=((f=(c=e==null?void 0:e.response)==null?void 0:c.data)==null?void 0:f.message)||(e==null?void 0:e.message)||((u=e==null?void 0:e.error)==null?void 0:u.message);typeof t=="string"&&t?s=t:e instanceof Error&&(s=e.message)}else typeof e=="string"&&e&&(s=e);w.show(s)}return}finally{n.value=!1}}return{data:l,error:a,loading:n,execute:S}}export{D as u};
