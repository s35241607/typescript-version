import{H as I,ap as v,A as L,u as i,aY as j,ar as w,aU as O}from"./index-BkP98Z5W.js";const S=(t,c,e)=>t==null||c==null?-1:t.toString().toLocaleLowerCase().indexOf(c.toString().toLocaleLowerCase()),_=I({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function x(t,c,e){var g;const a=[],s=(e==null?void 0:e.default)??S,m=e!=null&&e.filterKeys?w(e.filterKeys):!1,y=Object.keys((e==null?void 0:e.customKeyFilter)??{}).length;if(!(t!=null&&t.length))return a;e:for(let r=0;r<t.length;r++){const[f,M=f]=w(t[r]),h={},u={};let l=-1;if((c||y>0)&&!(e!=null&&e.noFilter)){if(typeof f=="object"){const K=m||Object.keys(M);for(const n of K){const b=O(M,n),k=(g=e==null?void 0:e.customKeyFilter)==null?void 0:g[n];if(l=k?k(b,c,f):s(b,c,f),l!==-1&&l!==!1)k?h[n]=l:u[n]=l;else if((e==null?void 0:e.filterMode)==="every")continue e}}else l=s(f,c,f),l!==-1&&l!==!1&&(u.title=l);const d=Object.keys(u).length,F=Object.keys(h).length;if(!d&&!F||(e==null?void 0:e.filterMode)==="union"&&F!==y&&!d||(e==null?void 0:e.filterMode)==="intersection"&&(F!==y||!d))continue}a.push({index:r,matches:{...u,...h}})}return a}function C(t,c,e,a){const s=v([]),m=v(new Map),y=L(()=>a!=null&&a.transform?i(c).map(r=>[r,a.transform(r)]):i(c));j(()=>{const r=typeof e=="function"?e():i(e),f=typeof r!="string"&&typeof r!="number"?"":String(r),M=x(y.value,f,{customKeyFilter:{...t.customKeyFilter,...i(a==null?void 0:a.customKeyFilter)},default:t.customFilter,filterKeys:t.filterKeys,filterMode:t.filterMode,noFilter:t.noFilter}),h=i(c),u=[],l=new Map;M.forEach(d=>{let{index:F,matches:K}=d;const n=h[F];u.push(n),l.set(n.value,K)}),s.value=u,m.value=l});function g(r){return m.value.get(r.value)}return{filteredItems:s,filteredMatches:m,getMatches:g}}export{_ as m,C as u};
